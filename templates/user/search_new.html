{% extends "base.html" %}

{% block title %}{{ t('search.title') if t else 'Search Items' }}{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto;">
    <!-- Page Header -->
    <div style="background: white; padding: 30px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div>
                <h1 style="color: #667eea; margin-bottom: 10px;">üîç {{ t('search.page_title') if t else 'Search Your Items' }}</h1>
                <p style="color: #666; margin: 0;">{{ t('search.description') if t else 'Find and manage your items easily' }}</p>
            </div>
            <a href="/user/items/new?lang={{ lang }}" style="background: #667eea; color: white; padding: 12px 20px; text-decoration: none; border-radius: 8px; font-weight: 500;">
                ‚ûï {{ t('actions.add_new_item') if t else 'Add New Item' }}
            </a>
        </div>
    </div>

    <!-- Search Form -->
    <div style="background: white; padding: 25px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
        <form method="GET" action="/user/search" style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 250px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #555;">{{ t('search.search_term') if t else 'Search Term' }}</label>
                <input type="text" name="q" value="{{ search_query or '' }}" placeholder="{{ t('search.search_placeholder') if t else 'Enter item name, description...' }}" 
                       style="width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px;">
            </div>
            <div style="min-width: 150px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #555;">{{ t('search.status') if t else 'Status' }}</label>
                <select name="status" style="width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px;">
                    <option value="">{{ t('search.all_statuses') if t else 'All Statuses' }}</option>
                    <option value="active" {% if selected_status == 'active' %}selected{% endif %}>{{ t('status.active') if t else 'Active' }}</option>
                    <option value="inactive" {% if selected_status == 'inactive' %}selected{% endif %}>{{ t('status.inactive') if t else 'Inactive' }}</option>
                    <option value="draft" {% if selected_status == 'draft' %}selected{% endif %}>{{ t('status.draft') if t else 'Draft' }}</option>
                </select>
            </div>
            <button type="submit" style="background: #667eea; color: white; padding: 12px 25px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; font-weight: 500;">
                üîç {{ t('search.search_button') if t else 'Search' }}
            </button>
            <input type="hidden" name="lang" value="{{ lang }}">
        </form>
    </div>

    <!-- Quick Actions -->
    <div style="background: white; padding: 25px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #667eea;">{{ t('search.quick_actions') if t else 'Quick Actions' }}</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <a href="/user/items?lang={{ lang }}" style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-decoration: none; color: #333; border: 2px solid #e9ecef; transition: all 0.3s;">
                <div style="font-size: 24px; margin-bottom: 10px;">üì¶</div>
                <div style="font-weight: 500; margin-bottom: 5px;">{{ t('actions.view_all_items') if t else 'View All Items' }}</div>
                <div style="font-size: 14px; color: #666;">{{ t('actions.view_all_items_desc') if t else 'See all your items' }}</div>
            </a>
            <a href="/user/items/new?lang={{ lang }}" style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-decoration: none; color: #333; border: 2px solid #e9ecef; transition: all 0.3s;">
                <div style="font-size: 24px; margin-bottom: 10px;">‚ûï</div>
                <div style="font-weight: 500; margin-bottom: 5px;">{{ t('actions.add_new_item') if t else 'Add New Item' }}</div>
                <div style="font-size: 14px; color: #666;">{{ t('actions.add_new_item_desc') if t else 'Create a new item' }}</div>
            </a>
            <a href="/user/dashboard?lang={{ lang }}" style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-decoration: none; color: #333; border: 2px solid #e9ecef; transition: all 0.3s;">
                <div style="font-size: 24px; margin-bottom: 10px;">üìä</div>
                <div style="font-weight: 500; margin-bottom: 5px;">{{ t('actions.dashboard') if t else 'Dashboard' }}</div>
                <div style="font-size: 14px; color: #666;">{{ t('actions.dashboard_desc') if t else 'View your overview' }}</div>
            </a>
        </div>
    </div>

    <!-- Search Results -->
    {% if items %}
    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom: 20px; color: #667eea;">{{ t('search.results') if t else 'Search Results' }} ({{ items|length }})</h3>
        
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6;">{{ t('table.name') if t else 'Name' }}</th>
                        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6;">{{ t('table.description') if t else 'Description' }}</th>
                        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6;">{{ t('table.price') if t else 'Price' }}</th>
                        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6;">{{ t('table.status') if t else 'Status' }}</th>
                        <th style="padding: 15px; text-align: center; border-bottom: 2px solid #dee2e6;">{{ t('table.actions') if t else 'Actions' }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr style="border-bottom: 1px solid #e9ecef;">
                        <td style="padding: 15px; font-weight: 500;">{{ item.name }}</td>
                        <td style="padding: 15px; color: #666;">{{ item.description[:50] }}{% if item.description|length > 50 %}...{% endif %}</td>
                        <td style="padding: 15px; font-weight: 500; color: #28a745;">${{ "%.2f"|format(item.price) }}</td>
                        <td style="padding: 15px;">
                            <span style="background: {% if item.status == 'active' %}#d4edda{% elif item.status == 'inactive' %}#f8d7da{% else %}#fff3cd{% endif %}; 
                                         color: {% if item.status == 'active' %}#155724{% elif item.status == 'inactive' %}#721c24{% else %}#856404{% endif %}; 
                                         padding: 4px 10px; border-radius: 15px; font-size: 12px; font-weight: 500;">
                                {{ item.status.title() }}
                            </span>
                        </td>
                        <td style="padding: 15px; text-align: center;">
                            <a href="/user/items/{{ item.id }}?lang={{ lang }}" style="background: #007bff; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 12px; margin-right: 5px;">{{ t('actions.view') if t else 'View' }}</a>
                            <a href="/user/items/{{ item.id }}/edit?lang={{ lang }}" style="background: #6c757d; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 12px;">{{ t('actions.edit') if t else 'Edit' }}</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% elif search_query %}
    <div style="background: white; padding: 40px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); text-align: center;">
        <div style="font-size: 48px; margin-bottom: 20px;">üîç</div>
        <h3 style="color: #667eea; margin-bottom: 15px;">{{ t('search.no_results') if t else 'No Results Found' }}</h3>
        <p style="color: #666; margin-bottom: 25px;">{{ t('search.no_results_desc') if t else 'Try adjusting your search terms or browse all items.' }}</p>
        <a href="/user/items?lang={{ lang }}" style="background: #667eea; color: white; padding: 12px 25px; text-decoration: none; border-radius: 8px; font-weight: 500;">
            {{ t('actions.view_all_items') if t else 'View All Items' }}
        </a>
    </div>
    {% else %}
    <div style="background: white; padding: 40px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); text-align: center;">
        <div style="font-size: 48px; margin-bottom: 20px;">üîç</div>
        <h3 style="color: #667eea; margin-bottom: 15px;">{{ t('search.start_searching') if t else 'Start Searching' }}</h3>
        <p style="color: #666;">{{ t('search.start_searching_desc') if t else 'Enter a search term above to find your items.' }}</p>
    </div>
    {% endif %}
</div>

<style>
a:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
}
</style>
{% endblock %}
